# ============================================================================
# E-commerce Product Roadmap Example
# ============================================================================
#
# Use Case: Product roadmap management with customer impact scoring
# 
# This example demonstrates:
# - Custom fields for impact/revenue tracking
# - 4-stage product workflow (Idea â†’ Planned â†’ In Development â†’ Shipped)
# - RICE scoring methodology (Reach Ã— Impact Ã— Confidence / Effort)
# - Quarter-based planning
# - GitHub Projects integration for roadmap visualization
#
# Perfect for: Product teams managing e-commerce features and roadmaps
# ============================================================================

sync:
  direction: bidirectional
  jql: 'project = ECOM AND type = "Feature"'  # Only sync feature requests
  # poll_interval: "*/30 * * * *"  # Every 30 minutes

# ============================================================================
# FIELD MAPPINGS
# ============================================================================
mappings:
  # Basic fields
  - jpd: "fields.summary"
    github: "title"
  
  - jpd: "fields.description"
    github: "body"
  
  # Custom impact fields (replace with your actual field IDs)
  # Run: pnpm run discover-fields ECOM
  
  # Customer Impact (1-5 scale)
  - jpd: "fields.customfield_IMPACT.value"  # Replace IMPACT with your field ID
    github: "labels"
    mapping:
      "5 - Critical": "impact:critical"
      "4 - High": "impact:high"
      "3 - Medium": "impact:medium"
      "2 - Low": "impact:low"
      "1 - Minimal": "impact:minimal"
  
  # Revenue Potential (in issue body)
  - jpd: "fields.customfield_REVENUE.value"  # Replace REVENUE with your field ID
    github: "body"
    template: "\n\nðŸ’° **Revenue Potential**: {{value}}"
  
  # Target Quarter
  - jpd: "fields.customfield_QUARTER.value"  # Replace QUARTER with your field ID
    github: "labels"
    template: "quarter:{{value | lowercase}}"
  
  # Feature Category
  - jpd: "fields.customfield_CATEGORY.value"  # Replace CATEGORY with your field ID
    github: "labels"
    template: "category:{{value | slugify}}"

# ============================================================================
# STATUS MAPPINGS (Product Workflow)
# ============================================================================
statuses:
  "Idea":
    github_state: open
    github_project_status: "Backlog"
    sync: true
  
  "Planned":
    github_state: open
    github_project_status: "Planned"
    sync: true
  
  "In Development":
    github_state: open
    github_project_status: "In Progress"
    sync: true
  
  "Shipped":
    github_state: closed
    github_project_status: "Done"
    sync: true

# ============================================================================
# GITHUB PROJECTS INTEGRATION (Optional)
# ============================================================================
# Visualize your roadmap in GitHub Projects
# projects:
#   enabled: true
#   project_number: 1  # Your GitHub project number
#   status_field_name: "Status"  # The status field in your project

# ============================================================================
# FIELD DEFINITIONS (For Validation)
# ============================================================================
# Document your custom fields for better error messages
fields:
  - id: "customfield_IMPACT"  # Replace with actual field ID
    name: "Customer Impact"
    type: "select"
    required: false
    description: "Impact on customer experience (1-5 scale)"
  
  - id: "customfield_REVENUE"  # Replace with actual field ID
    name: "Revenue Potential"
    type: "text"
    required: false
    description: "Estimated revenue impact (e.g., '$50K/year')"
  
  - id: "customfield_QUARTER"  # Replace with actual field ID
    name: "Target Quarter"
    type: "select"
    required: false
    description: "Planned delivery quarter (e.g., 'Q1 2025')"
  
  - id: "customfield_CATEGORY"  # Replace with actual field ID
    name: "Feature Category"
    type: "select"
    required: false
    description: "Product area (e.g., 'Checkout', 'Payments', 'Search')"

# ============================================================================
# GITHUB LABELS (Auto-Created)
# ============================================================================
# Labels are automatically created the first time they're used
# Pre-create all labels with: pnpm run setup-labels
labels:
  hierarchy:
    - name: "epic"
      color: "0052CC"
      description: "High-level initiative"
    - name: "feature"
      color: "6554C0"
      description: "Product feature"
  
  # Impact labels (from Customer Impact field)
  custom:
    - name: "impact:critical"
      color: "DE350B"
      description: "Critical customer impact"
    - name: "impact:high"
      color: "FF8B00"
      description: "High customer impact"
    - name: "impact:medium"
      color: "FFC400"
      description: "Medium customer impact"
    - name: "impact:low"
      color: "8993A4"
      description: "Low customer impact"
    - name: "impact:minimal"
      color: "C5DEF5"
      description: "Minimal customer impact"
  
  # Example quarter labels (you can add more as needed)
  # Note: These will be created dynamically from your Quarter field
  # - name: "quarter:q1-2025"
  #   color: "00B8D9"
  # - name: "quarter:q2-2025"
  #   color: "00B8D9"

# ============================================================================
# SETUP INSTRUCTIONS
# ============================================================================
# 1. Run field discovery: pnpm run discover-fields ECOM
# 2. Replace customfield_XXXXX with your actual field IDs
# 3. Update the "mapping" values to match your field options
# 4. Create labels: pnpm run setup-labels
# 5. Test with: pnpm run dev -- --dry-run
# 6. Enable GitHub Projects if you want roadmap visualization

